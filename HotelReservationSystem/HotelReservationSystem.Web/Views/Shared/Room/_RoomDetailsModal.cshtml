@model HotelReservationSystem.Web.ViewModels.Room.RoomViewModel

@{
    var fallback = Model.Type.ToString() == "Single" ? "~/images/rooms/single-room.jpg" : "~/images/rooms/double-room.jpg";
    var imgPath = Url.Content(Model.ImagePath ?? fallback);
    var isManager = User.IsInRole("Manager");
}

<div class="modal fade" id="roomDetailsModal-@Model.Id" tabindex="-1" aria-labelledby="roomDetailsModalLabel-@Model.Id" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-info text-white">
                <h5 class="modal-title" id="roomDetailsModalLabel-@Model.Id">
                    <i class="bi bi-door-open"></i> Pokój @Model.Number - Szczegóły
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Zamknij"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-5">
                        <img src="@imgPath" 
                             alt="Pokój @Model.Number" 
                             class="img-fluid rounded shadow" 
                             style="max-height: 300px; width: 100%; object-fit: cover;" />
                    </div>
                    <div class="col-md-7">
                        <dl class="row mb-0">
                            <dt class="col-sm-5">Numer pokoju:</dt>
                            <dd class="col-sm-7 fw-bold">@Model.Number</dd>

                            <dt class="col-sm-5">Typ pokoju:</dt>
                            <dd class="col-sm-7">@Model.Type</dd>

                            <dt class="col-sm-5">Cena za noc:</dt>
                            <dd class="col-sm-7 text-success fw-bold">@Model.PricePerNight @Model.Currency</dd>

                            <dt class="col-sm-5">Status:</dt>
                            <dd class="col-sm-7">
                                <span class="badge @(Model.IsAvailable ? "bg-success" : "bg-danger")">
                                    @(Model.IsAvailable ? "Dostępny" : "Zajęty/Niedostępny")
                                </span>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <conditional-group show-for-role="Manager">
                    <a asp-controller="Room" asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
                        <i class="bi bi-pencil"></i> Edytuj
                    </a>
                </conditional-group>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zamknij</button>
            </div>
        </div>
    </div>
</div>
